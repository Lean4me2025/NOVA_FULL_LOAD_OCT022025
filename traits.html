<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NOVA · Select Your Traits</title><link rel="stylesheet" href="assets/css/style.css"/></head><body><div class="wrap">
<h1>Select Your Traits</h1><div class="card"><p class="small">Tap traits you’ve actually shown. Up to <b>12</b>.</p><p id="catLine" class="small"></p></div>
<div id="grid" class="grid"></div>
<div class="bar"><div class="small" id="cap">0 / 12 selected</div><div><a class="btn" href="categories.html">Back</a><button id="next" class="btn" disabled>Next: Role Reveal</button></div></div></div>
<script type="module">import {{ get, set, dedupe, byAlpha, caseKey }} from './assets/js/shared.js'; const MAX=12; const cats=get('selectedCategories',[]); if(!cats||!cats.length) location.href='categories.html'; document.getElementById('catLine').textContent=`From categories: ${cats.join(', ')}`;
const map = await (await fetch('/data/traits_with_categories.json',{cache:'no-store'})).json(); const key=Object.fromEntries(Object.keys(map).map(k=>[k.toLowerCase(), map[k]])); const bag=[]; cats.forEach(c=>bag.push(...(key[(c||'').toLowerCase()]||[]))); const list=[...new Set(bag)].sort(byAlpha);
const selected=new Set(get('selectedTraits',[]));
function update(){{ document.getElementById('cap').textContent=`${{selected.size}} / ${MAX} selected`; document.getElementById('next').disabled=selected.size===0; set('selectedTraits',[...selected]); }}
function render(){{ const grid=document.getElementById('grid'); grid.innerHTML=''; list.forEach(t=>{{ const el=document.createElement('div'); el.className='pill'; el.textContent=t; if(selected.has(t)) el.classList.add('selected'); el.addEventListener('click',()=>{{ if(selected.has(t)){{selected.delete(t); el.classList.remove('selected');}} else if(selected.size<MAX){{selected.add(t); el.classList.add('selected');}} update(); }}); grid.appendChild(el); }}); update(); }}
render(); document.getElementById('next').addEventListener('click',()=>location.href='role.html');</script></body></html>